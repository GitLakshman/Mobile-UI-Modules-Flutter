# ğŸ“ Architecture Overview

## App Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         main.dart                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              MyApp (MaterialApp)                      â”‚  â”‚
â”‚  â”‚  â€¢ Theme: Light & Dark (AppTheme)                    â”‚  â”‚
â”‚  â”‚  â€¢ Routes: / (Login), /home (MainNavigation)         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚                            â”‚
                â–¼                            â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   LoginScreen        â”‚    â”‚   MainNavigation         â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚    â”‚  (Bottom Nav Bar)        â”‚
    â”‚  â”‚  LoginForm     â”‚  â”‚    â”‚                          â”‚
    â”‚  â”‚  â€¢ Email       â”‚  â”‚    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
    â”‚  â”‚  â€¢ Password    â”‚  â”‚    â”‚  â”‚ Home   â”‚ Profile  â”‚   â”‚
    â”‚  â”‚  â€¢ Validation  â”‚  â”‚    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚    â”‚         â”‚        â”‚        â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                          â”‚        â”‚
                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â”‚                               â”‚
                              â–¼                               â–¼
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚   HomeScreen       â”‚         â”‚   ProfileScreen      â”‚
                   â”‚                    â”‚         â”‚                      â”‚
                   â”‚  FutureBuilder     â”‚         â”‚  â€¢ Gradient Header   â”‚
                   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚         â”‚  â€¢ Avatar            â”‚
                   â”‚  â”‚ ApiService   â”‚  â”‚         â”‚  â€¢ Stats Row         â”‚
                   â”‚  â”‚ fetchPosts() â”‚  â”‚         â”‚  â€¢ Action Buttons    â”‚
                   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚         â”‚  â€¢ Menu Items        â”‚
                   â”‚         â”‚          â”‚         â”‚  â€¢ Logout            â”‚
                   â”‚         â–¼          â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
                   â”‚  â”‚   States    â”‚   â”‚
                   â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
                   â”‚  â”‚ Loading     â”‚â”€â”€â”€â”¼â”€â”€â–¶ LoadingView (Shimmer)
                   â”‚  â”‚ Error       â”‚â”€â”€â”€â”¼â”€â”€â–¶ ErrorView (Retry)
                   â”‚  â”‚ Empty       â”‚â”€â”€â”€â”¼â”€â”€â–¶ EmptyView
                   â”‚  â”‚ Success     â”‚â”€â”€â”€â”¼â”€â”€â–¶ ListView of PostCards
                   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Layer Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         PRESENTATION                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚ LoginScreen  â”‚  â”‚ HomeScreen   â”‚  â”‚ProfileScreen â”‚       â”‚
â”‚  â”‚              â”‚  â”‚              â”‚  â”‚              â”‚       â”‚
â”‚  â”‚ LoginForm    â”‚  â”‚ PostCard     â”‚  â”‚ _StatItem    â”‚       â”‚
â”‚  â”‚              â”‚  â”‚              â”‚  â”‚ _MenuItem    â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      SHARED WIDGETS                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚ LoadingView   â”‚  â”‚ ErrorView   â”‚  â”‚ EmptyView    â”‚       â”‚
â”‚  â”‚ (Shimmer)     â”‚  â”‚ (Retry)     â”‚  â”‚              â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     SERVICES & MODELS                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ ApiService    â”‚  â”‚ Post Model                   â”‚        â”‚
â”‚  â”‚               â”‚  â”‚                              â”‚        â”‚
â”‚  â”‚ fetchPosts()  â”‚â”€â”€â”‚ â€¢ id: int                    â”‚        â”‚
â”‚  â”‚ fetchPost(id) â”‚  â”‚ â€¢ userId: int                â”‚        â”‚
â”‚  â”‚               â”‚  â”‚ â€¢ title: String              â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â€¢ body: String               â”‚        â”‚
â”‚                     â”‚ â€¢ fromJson() factory         â”‚        â”‚
â”‚                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       CORE (Theme)                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ AppTheme      â”‚  â”‚ AppColors     â”‚  â”‚ AppStrings   â”‚     â”‚
â”‚  â”‚               â”‚  â”‚               â”‚  â”‚              â”‚     â”‚
â”‚  â”‚ lightTheme    â”‚  â”‚ primaryLight  â”‚  â”‚ UI text      â”‚     â”‚
â”‚  â”‚ darkTheme     â”‚  â”‚ primaryDark   â”‚  â”‚ constants    â”‚     â”‚
â”‚  â”‚               â”‚  â”‚ surfaces      â”‚  â”‚              â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Data Flow

### 1. Login Flow
```
User Input
    â”‚
    â–¼
LoginForm validates
    â”‚
    â”œâ”€ Invalid â”€â”€â–¶ Show error message
    â”‚
    â””â”€ Valid â”€â”€â–¶ Navigate to /home
                     â”‚
                     â–¼
                MainNavigation
```

### 2. Post Fetching Flow
```
HomeScreen loads
    â”‚
    â–¼
initState() calls
ApiService.fetchPosts()
    â”‚
    â–¼
FutureBuilder listens
    â”‚
    â”œâ”€ Waiting â”€â”€â–¶ LoadingView (Shimmer)
    â”‚
    â”œâ”€ Error â”€â”€â–¶ ErrorView (with retry)
    â”‚                 â”‚
    â”‚                 â””â”€ Retry â”€â”€â–¶ Re-fetch
    â”‚
    â”œâ”€ Empty â”€â”€â–¶ EmptyView
    â”‚
    â””â”€ Success â”€â”€â–¶ ListView of PostCards
                       â”‚
                       â””â”€ Tap â”€â”€â–¶ Show dialog
```

### 3. Theme Toggle Flow
```
User taps FAB
    â”‚
    â–¼
_toggleTheme() in MyApp
    â”‚
    â–¼
setState updates _themeMode
    â”‚
    â”œâ”€ Light â”€â”€â–¶ ThemeMode.dark
    â”‚
    â””â”€ Dark â”€â”€â–¶ ThemeMode.light
    â”‚
    â–¼
Entire app rebuilds with new theme
```

---

## Key Design Patterns

### 1. **Widget Composition**
- Small, focused widgets
- Reusable components
- Single responsibility

### 2. **Separation of Concerns**
```
UI Layer (Screens/Widgets)
    â†•
Service Layer (ApiService)
    â†•
Data Layer (Models)
```

### 3. **State Management**
- **setState**: Local UI state (theme mode, nav index)
- **FutureBuilder**: Async data fetching
- **Form**: Input validation state

### 4. **Error Handling**
```
Try-Catch in ApiService
    â”‚
    â””â”€ Throw Exception
           â”‚
           â–¼
    FutureBuilder catches
           â”‚
           â””â”€ Shows ErrorView
                  â”‚
                  â””â”€ User retries
```

---

## File Dependencies

```
main.dart
  â”œâ”€ core/theme/app_theme.dart
  â”‚   â””â”€ core/constants/app_colors.dart
  â”‚
  â”œâ”€ features/auth/login_screen.dart
  â”‚   â”œâ”€ core/constants/app_strings.dart
  â”‚   â””â”€ features/auth/widgets/login_form.dart
  â”‚
  â””â”€ MainNavigation
      â”œâ”€ features/home/home_screen.dart
      â”‚   â”œâ”€ shared/services/api_service.dart
      â”‚   â”‚   â””â”€ shared/models/post_model.dart
      â”‚   â”œâ”€ shared/widgets/loading_view.dart
      â”‚   â”œâ”€ shared/widgets/error_view.dart
      â”‚   â”œâ”€ shared/widgets/empty_view.dart
      â”‚   â””â”€ features/home/widgets/post_card.dart
      â”‚
      â””â”€ features/profile/profile_screen.dart
          â””â”€ core/constants/app_strings.dart
```

---

## State Lifecycle

### HomeScreen State Flow

```
1. Widget Created
        â”‚
        â–¼
2. initState()
   - Create Future<List<Post>>
        â”‚
        â–¼
3. build() called
   - FutureBuilder created
        â”‚
        â–¼
4. Future executes
   - ApiService.fetchPosts()
        â”‚
        â”œâ”€ HTTP GET request
        â”‚
        â”œâ”€ JSON parsing
        â”‚
        â””â”€ Return List<Post>
             â”‚
             â–¼
5. FutureBuilder updates
   - ConnectionState.waiting â†’ ConnectionState.done
        â”‚
        â–¼
6. UI updates with data
        â”‚
        â–¼
7. User interaction
   - Pull to refresh â†’ Go to step 2
   - Tap post â†’ Show dialog
```

---

This architecture ensures:
- âœ… Clean separation of concerns
- âœ… Easy to test individual layers
- âœ… Scalable for adding new features
- âœ… Beginner-friendly patterns
- âœ… Production-ready structure
